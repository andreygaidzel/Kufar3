@using Kufar3.Models

@{
    var declarations = (List<Declaration>) ViewBag.Declarations;
    var userRole = (UserRoles) ViewBag.UserRole;
    var userId = (int)ViewBag.UserId;
    var directory = (DirectoryTypes)ViewBag.Directory;
    var count = (int)ViewBag.Count;
    var num = (int)ViewBag.Num;
}

<ul>
    @foreach (var declaration in declarations)
    {
        <li class="declarations">
            @if (declaration.UserId == userId && directory == DirectoryTypes.User)
            {
                <div id="menu-desc">
                    <b>@Html.ActionLink("Изменить", "UserDeclaration", "User", new { declarationId = declaration.Id }, null) </b>
                    <b>@Html.ActionLink("Удалить", "DeleteDeclaration", "User", new {declarationId = declaration.Id}, null)</b>

                </div>
            }
            @{
                var path = declaration.Images.FirstOrDefault()?.Name;
                var url = Url.Action("Declaration", "Home", new {declarationId = declaration.Id});

                if (userRole == UserRoles.Moderator && directory == DirectoryTypes.Moderator)
                {
                    url = Url.Action("DeclarationModeration", "Moderator", new {declarationId = declaration.Id});
                }
            }

            <div class="img">
                <a href="@url"><img src="@path" alt="No img"/></a>
            </div>
            <div class="desc">
                <p class="nameD">
                    <b>
                        <a href="@url">@declaration.Name</a>
                    </b>
                </p>
                <br />
                <div class="text">
                    @declaration.CreatedDate / @declaration.City.Region.Name / @declaration.City.Name<br/>
                    @declaration.SubCategory.Category.Name / @declaration.SubCategory.Name
                    <br/><br />
                    <div class="price">Цена: @declaration.Price p.</div>
                </div>

            </div>
        </li>
    }
</ul>
<div class="links">
    @if (num > 3)
    {
        var number2 = num + 3;
        var number1 = num - 2;
        for (int i = number1; i < number2; i++)
        {
            var number = i +"  ";
            @Html.ActionLink(number, "Index", "Home", new {num = i}, null)
        }
    }
    else
    {
        if (count > 15)
        {
            for (int i = 1; i < 6; i++)
            {
                var number = i + "  ";
                @Html.ActionLink(number, "Index", "Home", new {num = i}, null)
            }
        }
        else
        {
            var cols = (int) count / 3;
            for (int i = 1; i < cols; i++)
            {
                var number = i + "  ";
                @Html.ActionLink(number, "Index", "Home", new {num = i}, null)
            }
        }
    }
</div>